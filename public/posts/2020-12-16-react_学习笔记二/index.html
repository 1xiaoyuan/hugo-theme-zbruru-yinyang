<!DOCTYPE html>
<html><head>
<title>React 学习笔记（二）</title>




<meta charset="utf-8">
<meta name="X-UA-Compatible" content="IE=edge">
<meta name="google-site-verification" content="">
<meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
<meta content="telephone=no" name="format-detection">
<meta name="description" content="">
<meta name="renderer" content="webkit">
<meta name="theme-color" content="#ffffff">



<meta property="og:title" content="React 学习笔记（二）" />
<meta property="og:description" content="React 元素的事件处理和 DOM 元素的很相似，但是有一点语法上的不同
React 事件的命名采用小驼峰式（camelCase），而不是纯小写
使用 JSX 语法时你需要传入一个函数作为事件处理函数，而不是一个字符串
一、事件处理 1.事件绑定 React 元素的事件处理和 DOM 元素类似，但是在语法上有些区别，比如：
传统的html：用双引号包裹，后面必须跟参数
&lt;button onclick=&#34;myfun()&#34;&gt;点击&lt;/button&gt; React：用大括号包裹，后面不跟参数
&lt;button onclick={myfun}&gt;点击&lt;/button&gt; 一个完整的事件函数代码如下
class Demo extends React.Component { render() { // 事件函数 function myfun() { alert(&#39;helo,world&#39;) } return ( // 绑定事件 &lt;button onClick={this.myfun}&gt; Activate Lasers &lt;/button&gt; ) } } ReactDOM.render( &lt;Demo /&gt;, document.getElementById(&#39;root&#39;) ) 如果方法后面没有()，则需要为这个方法绑定 this
2.阻止默认行为 在 React 中还有一个不同的点，不能通过返回 fasle 阻止默认行为， React 提供了一个属性－－preventDefault，可以通过 preventDefault 阻止脚本执行
看一下传统的 html 和 React 的对比" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://example.org/posts/2020-12-16-react_%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%BA%8C/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-12-16T13:15:00+00:00" />
<meta property="article:modified_time" content="2020-12-16T13:15:00+00:00" /><meta property="og:site_name" content="My Blog" />






<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="React 学习笔记（二）"/>
<meta name="twitter:description" content="React 元素的事件处理和 DOM 元素的很相似，但是有一点语法上的不同
React 事件的命名采用小驼峰式（camelCase），而不是纯小写
使用 JSX 语法时你需要传入一个函数作为事件处理函数，而不是一个字符串
一、事件处理 1.事件绑定 React 元素的事件处理和 DOM 元素类似，但是在语法上有些区别，比如：
传统的html：用双引号包裹，后面必须跟参数
&lt;button onclick=&#34;myfun()&#34;&gt;点击&lt;/button&gt; React：用大括号包裹，后面不跟参数
&lt;button onclick={myfun}&gt;点击&lt;/button&gt; 一个完整的事件函数代码如下
class Demo extends React.Component { render() { // 事件函数 function myfun() { alert(&#39;helo,world&#39;) } return ( // 绑定事件 &lt;button onClick={this.myfun}&gt; Activate Lasers &lt;/button&gt; ) } } ReactDOM.render( &lt;Demo /&gt;, document.getElementById(&#39;root&#39;) ) 如果方法后面没有()，则需要为这个方法绑定 this
2.阻止默认行为 在 React 中还有一个不同的点，不能通过返回 fasle 阻止默认行为， React 提供了一个属性－－preventDefault，可以通过 preventDefault 阻止脚本执行
看一下传统的 html 和 React 的对比"/>







<link type="text/css" rel="stylesheet" href="/vendor/css/bootstrap.min.css">


  






<link rel="stylesheet" href="/scss/journal.min.0f46f98b723f2aad4b02d9370bb6aa7848b5c2b2a5579642014082283683d2d8.css" integrity="sha256-D0b5i3I/Kq1LAtk3C7aqeEi1wrKlV5ZCAUCCKDaD0tg=" media="screen">



<link rel="stylesheet" href="/scss/dark-mode.min.79c34391dbcff20df8b4dac718e2606701efcbfdb9f3b08447ac39ac9dc7b463.css" integrity="sha256-ecNDkdvP8g34tNrHGOJgZwHvy/2587CER6w5rJ3HtGM=" media="screen">


<script src="/vendor/js/loadCSS.js"></script>
<script>
  loadCSS("https://fonts.googleapis.com/css?family=Fira+Mono|Material+Icons");
</script>






  <script src="/js/toc.js"></script>



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">
<script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script>
<script src="/vendor/js/md5.min.js"></script>
<script>
  var gitalk = new Gitalk({
  clientID: 'your client id',
  clientSecret: 'your client secret',
  repo: 'repo name',
  owner: 'user',
  admin: ['user'],
  id: md5(location.pathname),
  distractionFreeMode: 'false'
  });
  window.onload = function () {
        gitalk.render('gitalk-container')
  }
</script>












</head>
<body>
    	<div id="app"><div id="sideContainer" class="side-container">
    
    <a class="a-block nav-head false" href="http://example.org/">
    
        <div class="nav-title">
            A Hugo Site
        </div>
        
        <div class="nav-subtitle">
            Themed by Diary.
        </div>
        
    </a>

    <div class="nav-link-list">
        
        
            
            
            
                
            
            
            
            <a class="a-block nav-link-item active" href="/posts">
                Archive
            </a>
            
        
            
            
            
            
            
            <a class="a-block nav-link-item false" href="/categories">
                Categories
            </a>
            
        
            
            
            
            
            
            <a class="a-block nav-link-item false" href="/tags">
                Tags
            </a>
            
        
            
            
            
            
            
            <a class="a-block nav-link-item false" href="/index.xml">
                RSS Feed
            </a>
            
        
    </div>

    

    <div class="nav-footer">
        
Hugo Theme <a href="https://github.com/amazingrise/hugo-theme-diary">Diary</a> by <a href="https://risehere.net/">Rise</a>
<br>
Ported from <a href="https://mak1t0.cc/" target="_blank" rel="noreferrer noopener">Makito</a>'s <a href="https://github.com/SumiMakito/hexo-theme-journal/" target="_blank" rel="noreferrer noopener">Journal.</a> <br>
<br>

&copy;
	
	This is a customized copyright.
	

    </div>
    
</div><div id="extraContainer" class="extra-container">
    
    
    <div class="toc animated-visibility" :class="{ invisible: scrollY <= 140 }">


	<div class="toc-content">
	
		
		
		
		<center>- CATALOG -</center>
		
		
		<ul>
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#%e4%b8%80%e4%ba%8b%e4%bb%b6%e5%a4%84%e7%90%86" onclick="onNavClick(`#一事件处理-nav`)" id="一事件处理-nav">
									一、事件处理
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#1%e4%ba%8b%e4%bb%b6%e7%bb%91%e5%ae%9a" onclick="onNavClick(`#1事件绑定-nav`)" id="1事件绑定-nav">
									1.事件绑定
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#2%e9%98%bb%e6%ad%a2%e9%bb%98%e8%ae%a4%e8%a1%8c%e4%b8%ba" onclick="onNavClick(`#2阻止默认行为-nav`)" id="2阻止默认行为-nav">
									2.阻止默认行为
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
						
						
						
							<li>
								<a href="#%e4%ba%8c%e6%9d%a1%e4%bb%b6%e6%b8%b2%e6%9f%93" onclick="onNavClick(`#二条件渲染-nav`)" id="二条件渲染-nav">
									二、条件渲染
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#%e4%bd%bf%e7%94%a8-ifelse-%e8%af%ad%e5%8f%a5%e8%bf%9b%e8%a1%8c%e6%9d%a1%e4%bb%b6%e6%b8%b2%e6%9f%93" onclick="onNavClick(`#使用-ifelse-语句进行条件渲染-nav`)" id="使用-ifelse-语句进行条件渲染-nav">
									使用 if..else 语句进行条件渲染
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e6%80%8e%e4%b9%88%e9%98%bb%e6%ad%a2%e6%9d%a1%e4%bb%b6%e6%b8%b2%e6%9f%93" onclick="onNavClick(`#怎么阻止条件渲染-nav`)" id="怎么阻止条件渲染-nav">
									怎么阻止条件渲染？
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
						
						
						
							<li>
								<a href="#%e4%b8%89%e6%b8%b2%e6%9f%93%e5%88%97%e8%a1%a8" onclick="onNavClick(`#三渲染列表-nav`)" id="三渲染列表-nav">
									三、渲染列表
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#1%e5%88%86%e7%a6%bb%e7%bb%84%e4%bb%b6" onclick="onNavClick(`#1分离组件-nav`)" id="1分离组件-nav">
									1.分离组件
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#2key" onclick="onNavClick(`#2key-nav`)" id="2key-nav">
									2.key
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#3%e4%bd%bf%e7%94%a8-id-%e4%bd%9c%e4%b8%ba-key" onclick="onNavClick(`#3使用-id-作为-key-nav`)" id="3使用-id-作为-key-nav">
									3.使用 id 作为 key
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#4%e7%b4%a2%e5%bc%95-index-%e5%8f%af%e4%bb%a5%e4%bd%9c%e4%b8%ba-key-%e5%90%97" onclick="onNavClick(`#4索引-index-可以作为-key-吗-nav`)" id="4索引-index-可以作为-key-吗-nav">
									4.索引 index 可以作为 key 吗？
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#5%e7%94%a8-key-%e6%8f%90%e5%8f%96%e7%bb%84%e4%bb%b6" onclick="onNavClick(`#5用-key-提取组件-nav`)" id="5用-key-提取组件-nav">
									5.用 key 提取组件
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#6key-%e5%8f%aa%e6%98%af%e5%9c%a8%e5%85%84%e5%bc%9f%e8%8a%82%e7%82%b9%e4%b9%8b%e9%97%b4%e5%bf%85%e9%a1%bb%e5%94%af%e4%b8%80" onclick="onNavClick(`#6key-只是在兄弟节点之间必须唯一-nav`)" id="6key-只是在兄弟节点之间必须唯一-nav">
									6.key 只是在兄弟节点之间必须唯一
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#7vue-%e4%b8%ad%e6%b8%b2%e6%9f%93%e5%88%97%e8%a1%a8" onclick="onNavClick(`#7vue-中渲染列表-nav`)" id="7vue-中渲染列表-nav">
									7.vue 中渲染列表
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
						
						
						
							<li>
								<a href="#%e4%b8%80%e4%ba%8b%e4%bb%b6%e5%a4%84%e7%90%86-1" onclick="onNavClick(`#一事件处理-1-nav`)" id="一事件处理-1-nav">
									一、事件处理
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#1%e4%ba%8b%e4%bb%b6%e7%bb%91%e5%ae%9a-1" onclick="onNavClick(`#1事件绑定-1-nav`)" id="1事件绑定-1-nav">
									1.事件绑定
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#2%e9%98%bb%e6%ad%a2%e9%bb%98%e8%ae%a4%e8%a1%8c%e4%b8%ba-1" onclick="onNavClick(`#2阻止默认行为-1-nav`)" id="2阻止默认行为-1-nav">
									2.阻止默认行为
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
						
						
						
							<li>
								<a href="#%e4%ba%8c%e6%9d%a1%e4%bb%b6%e6%b8%b2%e6%9f%93-1" onclick="onNavClick(`#二条件渲染-1-nav`)" id="二条件渲染-1-nav">
									二、条件渲染
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#%e4%bd%bf%e7%94%a8-ifelse-%e8%af%ad%e5%8f%a5%e8%bf%9b%e8%a1%8c%e6%9d%a1%e4%bb%b6%e6%b8%b2%e6%9f%93-1" onclick="onNavClick(`#使用-ifelse-语句进行条件渲染-1-nav`)" id="使用-ifelse-语句进行条件渲染-1-nav">
									使用 if..else 语句进行条件渲染
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e6%80%8e%e4%b9%88%e9%98%bb%e6%ad%a2%e6%9d%a1%e4%bb%b6%e6%b8%b2%e6%9f%93-1" onclick="onNavClick(`#怎么阻止条件渲染-1-nav`)" id="怎么阻止条件渲染-1-nav">
									怎么阻止条件渲染？
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
						
						
						
							<li>
								<a href="#%e4%b8%89%e6%b8%b2%e6%9f%93%e5%88%97%e8%a1%a8-1" onclick="onNavClick(`#三渲染列表-1-nav`)" id="三渲染列表-1-nav">
									三、渲染列表
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#1%e5%88%86%e7%a6%bb%e7%bb%84%e4%bb%b6-1" onclick="onNavClick(`#1分离组件-1-nav`)" id="1分离组件-1-nav">
									1.分离组件
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#2key-1" onclick="onNavClick(`#2key-1-nav`)" id="2key-1-nav">
									2.key
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#3%e4%bd%bf%e7%94%a8-id-%e4%bd%9c%e4%b8%ba-key-1" onclick="onNavClick(`#3使用-id-作为-key-1-nav`)" id="3使用-id-作为-key-1-nav">
									3.使用 id 作为 key
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#4%e7%b4%a2%e5%bc%95-index-%e5%8f%af%e4%bb%a5%e4%bd%9c%e4%b8%ba-key-%e5%90%97-1" onclick="onNavClick(`#4索引-index-可以作为-key-吗-1-nav`)" id="4索引-index-可以作为-key-吗-1-nav">
									4.索引 index 可以作为 key 吗？
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#5%e7%94%a8-key-%e6%8f%90%e5%8f%96%e7%bb%84%e4%bb%b6-1" onclick="onNavClick(`#5用-key-提取组件-1-nav`)" id="5用-key-提取组件-1-nav">
									5.用 key 提取组件
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#6key-%e5%8f%aa%e6%98%af%e5%9c%a8%e5%85%84%e5%bc%9f%e8%8a%82%e7%82%b9%e4%b9%8b%e9%97%b4%e5%bf%85%e9%a1%bb%e5%94%af%e4%b8%80-1" onclick="onNavClick(`#6key-只是在兄弟节点之间必须唯一-1-nav`)" id="6key-只是在兄弟节点之间必须唯一-1-nav">
									6.key 只是在兄弟节点之间必须唯一
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#7vue-%e4%b8%ad%e6%b8%b2%e6%9f%93%e5%88%97%e8%a1%a8-1" onclick="onNavClick(`#7vue-中渲染列表-1-nav`)" id="7vue-中渲染列表-1-nav">
									7.vue 中渲染列表
								</a>
							</li>
						
						
					
				
			
		</ul>
	</div>

</div>
    
    <div class="pagination">
        <a id="globalBackToTop" class="pagination-action animated-visibility" href="#top" :class="{ invisible: scrollY == 0 }">
            <i class="material-icons pagination-action-icon">
                keyboard_arrow_up
            </i>
        </a>
        
        <a type="button" class="pagination-action" id="darkModeToggleButton">
            <span class="material-icons pagination-action-icon" id="darkModeToggleIcon">
                dark_mode
            </span>
        </a>
        
        
    </div>
</div>
<div class="single-column-drawer-container" id="drawer"
     v-bind:class="{ 'single-column-drawer-container-active': isDrawerOpen }">
    <div class="drawer-content">
        <div class="drawer-menu">
            
            
            
                
                
                
                    
                
                
                
                <a class="a-block drawer-menu-item active" href="/posts">
                    Archive
                </a>
                
            
                
                
                
                
                
                <a class="a-block drawer-menu-item false" href="/categories">
                    Categories
                </a>
                
            
                
                
                
                
                
                <a class="a-block drawer-menu-item false" href="/tags">
                    Tags
                </a>
                
            
                
                
                
                
                
                <a class="a-block drawer-menu-item false" href="/index.xml">
                    RSS Feed
                </a>
                
            
            
            <div class="toc">


	<div class="toc-content">
	
		
		
		
		<center>- CATALOG -</center>
		
		
		<ul>
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#%e4%b8%80%e4%ba%8b%e4%bb%b6%e5%a4%84%e7%90%86" onclick="onNavClick(`#一事件处理-nav`)" id="一事件处理-nav">
									一、事件处理
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#1%e4%ba%8b%e4%bb%b6%e7%bb%91%e5%ae%9a" onclick="onNavClick(`#1事件绑定-nav`)" id="1事件绑定-nav">
									1.事件绑定
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#2%e9%98%bb%e6%ad%a2%e9%bb%98%e8%ae%a4%e8%a1%8c%e4%b8%ba" onclick="onNavClick(`#2阻止默认行为-nav`)" id="2阻止默认行为-nav">
									2.阻止默认行为
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
						
						
						
							<li>
								<a href="#%e4%ba%8c%e6%9d%a1%e4%bb%b6%e6%b8%b2%e6%9f%93" onclick="onNavClick(`#二条件渲染-nav`)" id="二条件渲染-nav">
									二、条件渲染
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#%e4%bd%bf%e7%94%a8-ifelse-%e8%af%ad%e5%8f%a5%e8%bf%9b%e8%a1%8c%e6%9d%a1%e4%bb%b6%e6%b8%b2%e6%9f%93" onclick="onNavClick(`#使用-ifelse-语句进行条件渲染-nav`)" id="使用-ifelse-语句进行条件渲染-nav">
									使用 if..else 语句进行条件渲染
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e6%80%8e%e4%b9%88%e9%98%bb%e6%ad%a2%e6%9d%a1%e4%bb%b6%e6%b8%b2%e6%9f%93" onclick="onNavClick(`#怎么阻止条件渲染-nav`)" id="怎么阻止条件渲染-nav">
									怎么阻止条件渲染？
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
						
						
						
							<li>
								<a href="#%e4%b8%89%e6%b8%b2%e6%9f%93%e5%88%97%e8%a1%a8" onclick="onNavClick(`#三渲染列表-nav`)" id="三渲染列表-nav">
									三、渲染列表
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#1%e5%88%86%e7%a6%bb%e7%bb%84%e4%bb%b6" onclick="onNavClick(`#1分离组件-nav`)" id="1分离组件-nav">
									1.分离组件
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#2key" onclick="onNavClick(`#2key-nav`)" id="2key-nav">
									2.key
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#3%e4%bd%bf%e7%94%a8-id-%e4%bd%9c%e4%b8%ba-key" onclick="onNavClick(`#3使用-id-作为-key-nav`)" id="3使用-id-作为-key-nav">
									3.使用 id 作为 key
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#4%e7%b4%a2%e5%bc%95-index-%e5%8f%af%e4%bb%a5%e4%bd%9c%e4%b8%ba-key-%e5%90%97" onclick="onNavClick(`#4索引-index-可以作为-key-吗-nav`)" id="4索引-index-可以作为-key-吗-nav">
									4.索引 index 可以作为 key 吗？
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#5%e7%94%a8-key-%e6%8f%90%e5%8f%96%e7%bb%84%e4%bb%b6" onclick="onNavClick(`#5用-key-提取组件-nav`)" id="5用-key-提取组件-nav">
									5.用 key 提取组件
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#6key-%e5%8f%aa%e6%98%af%e5%9c%a8%e5%85%84%e5%bc%9f%e8%8a%82%e7%82%b9%e4%b9%8b%e9%97%b4%e5%bf%85%e9%a1%bb%e5%94%af%e4%b8%80" onclick="onNavClick(`#6key-只是在兄弟节点之间必须唯一-nav`)" id="6key-只是在兄弟节点之间必须唯一-nav">
									6.key 只是在兄弟节点之间必须唯一
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#7vue-%e4%b8%ad%e6%b8%b2%e6%9f%93%e5%88%97%e8%a1%a8" onclick="onNavClick(`#7vue-中渲染列表-nav`)" id="7vue-中渲染列表-nav">
									7.vue 中渲染列表
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
						
						
						
							<li>
								<a href="#%e4%b8%80%e4%ba%8b%e4%bb%b6%e5%a4%84%e7%90%86-1" onclick="onNavClick(`#一事件处理-1-nav`)" id="一事件处理-1-nav">
									一、事件处理
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#1%e4%ba%8b%e4%bb%b6%e7%bb%91%e5%ae%9a-1" onclick="onNavClick(`#1事件绑定-1-nav`)" id="1事件绑定-1-nav">
									1.事件绑定
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#2%e9%98%bb%e6%ad%a2%e9%bb%98%e8%ae%a4%e8%a1%8c%e4%b8%ba-1" onclick="onNavClick(`#2阻止默认行为-1-nav`)" id="2阻止默认行为-1-nav">
									2.阻止默认行为
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
						
						
						
							<li>
								<a href="#%e4%ba%8c%e6%9d%a1%e4%bb%b6%e6%b8%b2%e6%9f%93-1" onclick="onNavClick(`#二条件渲染-1-nav`)" id="二条件渲染-1-nav">
									二、条件渲染
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#%e4%bd%bf%e7%94%a8-ifelse-%e8%af%ad%e5%8f%a5%e8%bf%9b%e8%a1%8c%e6%9d%a1%e4%bb%b6%e6%b8%b2%e6%9f%93-1" onclick="onNavClick(`#使用-ifelse-语句进行条件渲染-1-nav`)" id="使用-ifelse-语句进行条件渲染-1-nav">
									使用 if..else 语句进行条件渲染
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e6%80%8e%e4%b9%88%e9%98%bb%e6%ad%a2%e6%9d%a1%e4%bb%b6%e6%b8%b2%e6%9f%93-1" onclick="onNavClick(`#怎么阻止条件渲染-1-nav`)" id="怎么阻止条件渲染-1-nav">
									怎么阻止条件渲染？
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
						
						
						
							<li>
								<a href="#%e4%b8%89%e6%b8%b2%e6%9f%93%e5%88%97%e8%a1%a8-1" onclick="onNavClick(`#三渲染列表-1-nav`)" id="三渲染列表-1-nav">
									三、渲染列表
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#1%e5%88%86%e7%a6%bb%e7%bb%84%e4%bb%b6-1" onclick="onNavClick(`#1分离组件-1-nav`)" id="1分离组件-1-nav">
									1.分离组件
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#2key-1" onclick="onNavClick(`#2key-1-nav`)" id="2key-1-nav">
									2.key
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#3%e4%bd%bf%e7%94%a8-id-%e4%bd%9c%e4%b8%ba-key-1" onclick="onNavClick(`#3使用-id-作为-key-1-nav`)" id="3使用-id-作为-key-1-nav">
									3.使用 id 作为 key
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#4%e7%b4%a2%e5%bc%95-index-%e5%8f%af%e4%bb%a5%e4%bd%9c%e4%b8%ba-key-%e5%90%97-1" onclick="onNavClick(`#4索引-index-可以作为-key-吗-1-nav`)" id="4索引-index-可以作为-key-吗-1-nav">
									4.索引 index 可以作为 key 吗？
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#5%e7%94%a8-key-%e6%8f%90%e5%8f%96%e7%bb%84%e4%bb%b6-1" onclick="onNavClick(`#5用-key-提取组件-1-nav`)" id="5用-key-提取组件-1-nav">
									5.用 key 提取组件
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#6key-%e5%8f%aa%e6%98%af%e5%9c%a8%e5%85%84%e5%bc%9f%e8%8a%82%e7%82%b9%e4%b9%8b%e9%97%b4%e5%bf%85%e9%a1%bb%e5%94%af%e4%b8%80-1" onclick="onNavClick(`#6key-只是在兄弟节点之间必须唯一-1-nav`)" id="6key-只是在兄弟节点之间必须唯一-1-nav">
									6.key 只是在兄弟节点之间必须唯一
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#7vue-%e4%b8%ad%e6%b8%b2%e6%9f%93%e5%88%97%e8%a1%a8-1" onclick="onNavClick(`#7vue-中渲染列表-1-nav`)" id="7vue-中渲染列表-1-nav">
									7.vue 中渲染列表
								</a>
							</li>
						
						
					
				
			
		</ul>
	</div>

</div>
            
        </div>
    </div>
</div>
<transition name="fade">
    <div id="drawer-mask" v-bind:class="{ 'single-column-drawer-mask': mounted }" v-if="isDrawerOpen" v-on:click="toggleDrawer"></div>
</transition>
<nav id="navBar" class="navbar sticky-top navbar-light single-column-nav-container">
    <div id="navBackground" class="nav-background"></div>
    <div class="container container-narrow nav-content">
        <button id="nav_dropdown_btn" class="nav-dropdown-toggle" type="button" v-on:click="toggleDrawer">
            <i class="material-icons">
                menu
            </i>
        </button>
        <a id="navTitle" class="navbar-brand" href="http://example.org/">
            A Hugo Site
        </a>
        
        <button type="button" class="nav-darkmode-toggle" id="darkModeToggleButton2">
            <i class="material-icons" id="darkModeToggleIcon2">
                dark_mode
            </i>
        </button>
        
    </div>
</nav>
<div class="single-column-header-container" id="pageHead"
     v-bind:style="{ transform: 'translateZ(0px) translateY('+.3*scrollY+'px)', opacity: 1-navOpacity }">
    <a href="http://example.org/">
        <div class="single-column-header-title">A Hugo Site</div>
        
        <div class="single-column-header-subtitle">Themed by Diary.</div>
        

    </a>
</div>

            <div id="content">
                <div id="streamContainer" class="stream-container">

    <div class="post-list-container post-list-container-shadow">
        <div class="post">
            
            
            

            <div class="post-head-wrapper-text-only"
                
            >
                <div class="post-title">
                    React 学习笔记（二）
                    
                    <div class="post-meta">
                        
                        <time itemprop="datePublished">
                            2020-12-16 13:15
                        </time>
                        

                        
                            <i class="material-icons" style="">folder</i>
                                <a href="/categories/">[技术]</a>
                                &nbsp;
                        

                        
                            <i class="material-icons" style="">label</i>
                            
                                <a href="/tags/react">react</a>
                                &nbsp;
                            
                        
                        
                    </div>
                </div>
            </div>
            
            <div class="post-body-wrapper">
                
                <div class="post-body" v-pre>
                
                    <p>React 元素的事件处理和 DOM 元素的很相似，但是有一点语法上的不同</p>
<p>React 事件的命名采用小驼峰式（camelCase），而不是纯小写</p>
<p>使用 JSX 语法时你需要传入一个函数作为事件处理函数，而不是一个字符串</p>
<!-- raw HTML omitted -->
<h2 id="一事件处理">一、事件处理</h2>
<h3 id="1事件绑定">1.事件绑定</h3>
<p>React 元素的事件处理和 DOM 元素类似，但是在语法上有些区别，比如：</p>
<p><strong>传统的html</strong>：用双引号包裹，后面必须跟参数</p>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>&lt;<span style="color:#8b008b;font-weight:bold">button</span> <span style="color:#658b00">onclick</span>=<span style="color:#cd5555">&#34;myfun()&#34;</span>&gt;点击&lt;/<span style="color:#8b008b;font-weight:bold">button</span>&gt;
</span></span></code></pre></div><p><strong>React</strong>：用大括号包裹，后面不跟参数</p>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>&lt;<span style="color:#8b008b;font-weight:bold">button</span> <span style="color:#658b00">onclick</span>=<span style="color:#cd5555">{myfun}</span>&gt;点击&lt;/<span style="color:#8b008b;font-weight:bold">button</span>&gt;
</span></span></code></pre></div><p>一个完整的事件函数代码如下</p>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#8b008b;font-weight:bold">class</span> Demo <span style="color:#8b008b;font-weight:bold">extends</span> React.Component {
</span></span><span style="display:flex;"><span>    render() {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#228b22">// 事件函数
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>        <span style="color:#8b008b;font-weight:bold">function</span> myfun() {
</span></span><span style="display:flex;"><span>            alert(<span style="color:#cd5555">&#39;helo,world&#39;</span>)
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#8b008b;font-weight:bold">return</span> (
</span></span><span style="display:flex;"><span>            <span style="color:#228b22">// 绑定事件
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>            &lt;button onClick={<span style="color:#8b008b;font-weight:bold">this</span>.myfun}&gt;
</span></span><span style="display:flex;"><span>                Activate Lasers
</span></span><span style="display:flex;"><span>            &lt;<span style="color:#a61717;background-color:#e3d2d2">/button&gt;</span>
</span></span><span style="display:flex;"><span>        )
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>ReactDOM.render(
</span></span><span style="display:flex;"><span>    &lt;Demo /&gt;,
</span></span><span style="display:flex;"><span>    <span style="color:#658b00">document</span>.getElementById(<span style="color:#cd5555">&#39;root&#39;</span>)
</span></span><span style="display:flex;"><span>)
</span></span></code></pre></div><blockquote>
<p>如果方法后面没有<code>()</code>，则需要为这个方法绑定 <code>this</code></p>
</blockquote>
<h3 id="2阻止默认行为">2.阻止默认行为</h3>
<p>在 React 中还有一个不同的点，不能通过返回 fasle 阻止默认行为， React 提供了一个属性－－<code>preventDefault</code>，可以通过 preventDefault 阻止脚本执行</p>
<p>看一下传统的 html 和 React 的对比</p>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>&lt;<span style="color:#8b008b;font-weight:bold">a</span> <span style="color:#658b00">href</span>=<span style="color:#cd5555">&#34;#&#34;</span> <span style="color:#658b00">onclick</span>=<span style="color:#cd5555">&#34;alert(&#39;是否弹窗？&#39;);return false&#34;</span>&gt;
</span></span><span style="display:flex;"><span>    Click me
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#8b008b;font-weight:bold">a</span>&gt;
</span></span></code></pre></div><p>直接在写上 false 就可以阻止脚本执行</p>
<p>React 通过 preventDefault 属性阻止脚本执行：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#8b008b;font-weight:bold">function</span> ActionLink() {
</span></span><span style="display:flex;"><span>  <span style="color:#8b008b;font-weight:bold">function</span> handleClick(e) {
</span></span><span style="display:flex;"><span>    e.preventDefault();
</span></span><span style="display:flex;"><span>    console.log(<span style="color:#cd5555">&#39;The link was clicked.&#39;</span>);
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#8b008b;font-weight:bold">return</span> (
</span></span><span style="display:flex;"><span>    &lt;a href=<span style="color:#cd5555">&#34;#&#34;</span> onClick={handleClick}&gt;
</span></span><span style="display:flex;"><span>      Click me
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#a61717;background-color:#e3d2d2">/a&gt;</span>
</span></span><span style="display:flex;"><span>  );
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h2 id="二条件渲染">二、条件渲染</h2>
<p>在 React 中，可以创建不同的组件来封装各种你需要的行为，然后，根据应用不同的状态，你可以只渲染对应状态下的部分内容。</p>
<p>React 中的条件渲染和 javascript 中的一样，使用 <code>if</code> 运算符来表示元素当前的状态，然后让 React 根据他们来更新 UI。</p>
<h3 id="使用-ifelse-语句进行条件渲染">使用 if..else 语句进行条件渲染</h3>
<p>先写一个条件渲染的例子，定义了两个组件，然后通过判断组件 <code>Greeting</code> 中的变量 <code>isLoggedIn</code> 的真伪，让浏览器渲染组件 <code>UserGreeting</code> 或者 <code>GuestGreeting</code>。</p>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#228b22">// App.js
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span><span style="color:#8b008b;font-weight:bold">import</span> React, { Component } from <span style="color:#cd5555">&#39;react&#39;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#8b008b;font-weight:bold">export</span> <span style="color:#8b008b;font-weight:bold">default</span> <span style="color:#8b008b;font-weight:bold">class</span> App <span style="color:#8b008b;font-weight:bold">extends</span> Component {
</span></span><span style="display:flex;"><span>  render() {
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">function</span> UserGreeting(props) {
</span></span><span style="display:flex;"><span>      <span style="color:#8b008b;font-weight:bold">return</span> &lt;h3&gt;Welcome back!&lt;<span style="color:#a61717;background-color:#e3d2d2">/h3&gt;;</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">function</span> GuestGreeting(props) {
</span></span><span style="display:flex;"><span>      <span style="color:#8b008b;font-weight:bold">return</span> &lt;h3&gt;Please sign up.&lt;<span style="color:#a61717;background-color:#e3d2d2">/h3&gt;;</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">function</span> Greeting(props) {
</span></span><span style="display:flex;"><span>      <span style="color:#8b008b;font-weight:bold">const</span> isLoggedIn = props.isLoggedIn;
</span></span><span style="display:flex;"><span>      <span style="color:#8b008b;font-weight:bold">if</span> (isLoggedIn) {
</span></span><span style="display:flex;"><span>        <span style="color:#8b008b;font-weight:bold">return</span> &lt;UserGreeting /&gt;;
</span></span><span style="display:flex;"><span>      }   
</span></span><span style="display:flex;"><span>      <span style="color:#8b008b;font-weight:bold">return</span> &lt;GuestGreeting /&gt;;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">return</span> (
</span></span><span style="display:flex;"><span>      &lt;div&gt;
</span></span><span style="display:flex;"><span>        &lt;Greeting isLoggedIn={<span style="color:#8b008b;font-weight:bold">false</span>} /&gt;
</span></span><span style="display:flex;"><span>      &lt;<span style="color:#a61717;background-color:#e3d2d2">/div&gt;</span>
</span></span><span style="display:flex;"><span>    )
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>最后变量 <code>isLoggedIn</code> 定义了 <code>false</code>，因此，浏览器渲染 `GuestGreeting。</p>
<h3 id="怎么阻止条件渲染">怎么阻止条件渲染？</h3>
<p>在有些情况下，我们希望能隐藏组件，即使他已经被其他组件渲染。我们可以通过 <code>render</code> 方法返回 <code>null</code> 让组件不渲染。</p>
<p>下面的示例中，<!-- raw HTML omitted --> 会根据 prop 中 <code>warn</code> 的值来进行条件渲染。如果 <code>warn</code> 的值是 <code>false</code>，那么组件则不会渲染:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#8b008b;font-weight:bold">function</span> WarningBanner(props) {
</span></span><span style="display:flex;"><span>  <span style="color:#8b008b;font-weight:bold">if</span> (!props.warn) {
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">return</span> <span style="color:#8b008b;font-weight:bold">null</span>;
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#8b008b;font-weight:bold">return</span> (
</span></span><span style="display:flex;"><span>    &lt;div className=<span style="color:#cd5555">&#34;warning&#34;</span>&gt;
</span></span><span style="display:flex;"><span>      Warning!
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#a61717;background-color:#e3d2d2">/div&gt;</span>
</span></span><span style="display:flex;"><span>  );
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#8b008b;font-weight:bold">class</span> Page <span style="color:#8b008b;font-weight:bold">extends</span> React.Component {
</span></span><span style="display:flex;"><span>  constructor(props) {
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">super</span>(props);
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">this</span>.state = {showWarning: <span style="color:#8b008b;font-weight:bold">true</span>};
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">this</span>.handleToggleClick = <span style="color:#8b008b;font-weight:bold">this</span>.handleToggleClick.bind(<span style="color:#8b008b;font-weight:bold">this</span>);
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  handleToggleClick() {
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">this</span>.setState(state =&gt; ({
</span></span><span style="display:flex;"><span>      showWarning: !state.showWarning
</span></span><span style="display:flex;"><span>    }));
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  render() {
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">return</span> (
</span></span><span style="display:flex;"><span>      &lt;div&gt;
</span></span><span style="display:flex;"><span>        &lt;WarningBanner warn={<span style="color:#8b008b;font-weight:bold">this</span>.state.showWarning} /&gt;
</span></span><span style="display:flex;"><span>        &lt;button onClick={<span style="color:#8b008b;font-weight:bold">this</span>.handleToggleClick}&gt;
</span></span><span style="display:flex;"><span>          {<span style="color:#8b008b;font-weight:bold">this</span>.state.showWarning ? <span style="color:#cd5555">&#39;Hide&#39;</span> : <span style="color:#cd5555">&#39;Show&#39;</span>}
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#a61717;background-color:#e3d2d2">/button&gt;</span>
</span></span><span style="display:flex;"><span>      &lt;<span style="color:#a61717;background-color:#e3d2d2">/div&gt;</span>
</span></span><span style="display:flex;"><span>    );
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>ReactDOM.render(
</span></span><span style="display:flex;"><span>  &lt;Page /&gt;,
</span></span><span style="display:flex;"><span>  <span style="color:#658b00">document</span>.getElementById(<span style="color:#cd5555">&#39;root&#39;</span>)
</span></span><span style="display:flex;"><span>);
</span></span></code></pre></div><h2 id="三渲染列表">三、渲染列表</h2>
<p>先看一段代码，我们使用 <code>map()</code> 函数让数组中的每一项变双倍，然后得到一个新的数组 <code>doubled</code> 并打印出来。</p>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#8b008b;font-weight:bold">const</span> numbers = [<span style="color:#b452cd">1</span>, <span style="color:#b452cd">2</span>, <span style="color:#b452cd">3</span>, <span style="color:#b452cd">4</span>, <span style="color:#b452cd">5</span>];
</span></span><span style="display:flex;"><span><span style="color:#8b008b;font-weight:bold">const</span> doubled = numbers.map((number) =&gt; number * <span style="color:#b452cd">2</span>);
</span></span><span style="display:flex;"><span>console.log(doubled);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#228b22">// [2,4,6,8,10]
</span></span></span></code></pre></div><p>而在 React 中，把数组转换为元素列表的过程是相似的。</p>
<p>先通过 <code>map()</code> 方法遍历 <code>numbers</code> 数组，将数组中的每个元素变成 <code>&lt;li&gt;</code> 标签，最后将得到的数组赋值给 <code>listItems</code> 。</p>
<p>然后返回 <code>{listItem}</code> 。</p>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#228b22">// Map.js
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span><span style="color:#8b008b;font-weight:bold">const</span> numbers = [<span style="color:#b452cd">1</span>, <span style="color:#b452cd">2</span>, <span style="color:#b452cd">3</span>, <span style="color:#b452cd">4</span>, <span style="color:#b452cd">5</span>];
</span></span><span style="display:flex;"><span><span style="color:#8b008b;font-weight:bold">const</span> listItems = numbers.map((number) =&gt;
</span></span><span style="display:flex;"><span>  &lt;li&gt;{number}&lt;<span style="color:#a61717;background-color:#e3d2d2">/li&gt;</span>
</span></span><span style="display:flex;"><span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>ReactDOM.render(
</span></span><span style="display:flex;"><span>  &lt;ul&gt;{listItems}&lt;<span style="color:#a61717;background-color:#e3d2d2">/ul&gt;,</span>
</span></span><span style="display:flex;"><span>  <span style="color:#658b00">document</span>.getElementById(<span style="color:#cd5555">&#39;root&#39;</span>)
</span></span><span style="display:flex;"><span>);
</span></span></code></pre></div><p>运行之后浏览器出现 1-5 的无序列表</p>
<h3 id="1分离组件">1.分离组件</h3>
<p>上面就是一个基本的列表渲染的例子，但是数据写死了。接下来我们将数组重构成一个组件，以后再进行数组渲染时，可以轻松调用。</p>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#228b22">// Map.js
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span><span style="color:#8b008b;font-weight:bold">export</span> <span style="color:#8b008b;font-weight:bold">default</span> <span style="color:#8b008b;font-weight:bold">class</span> Map <span style="color:#8b008b;font-weight:bold">extends</span> Component {
</span></span><span style="display:flex;"><span>  render() {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#228b22">// 分离出组件 NumberList 作为转换数组的组件
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>    <span style="color:#8b008b;font-weight:bold">function</span> NumberList(props) {
</span></span><span style="display:flex;"><span>      <span style="color:#8b008b;font-weight:bold">const</span> numbers = props.numbers;
</span></span><span style="display:flex;"><span>      <span style="color:#8b008b;font-weight:bold">const</span> listItems = numbers.map((number) =&gt;
</span></span><span style="display:flex;"><span>        &lt;li&gt;{number}&lt;<span style="color:#a61717;background-color:#e3d2d2">/li&gt;</span>
</span></span><span style="display:flex;"><span>      );
</span></span><span style="display:flex;"><span>      <span style="color:#8b008b;font-weight:bold">return</span> (
</span></span><span style="display:flex;"><span>        &lt;ul&gt;{listItems}&lt;<span style="color:#a61717;background-color:#e3d2d2">/ul&gt;</span>
</span></span><span style="display:flex;"><span>      );
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#228b22">// 传入需要的数据
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>    <span style="color:#8b008b;font-weight:bold">const</span> numbers = [<span style="color:#b452cd">1</span>, <span style="color:#b452cd">2</span>, <span style="color:#b452cd">3</span>, <span style="color:#b452cd">4</span>, <span style="color:#b452cd">5</span>, <span style="color:#b452cd">6</span>, <span style="color:#b452cd">7</span>];
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">return</span> (
</span></span><span style="display:flex;"><span>      &lt;div&gt;
</span></span><span style="display:flex;"><span>        &lt;NumberList numbers={numbers} /&gt;
</span></span><span style="display:flex;"><span>      &lt;<span style="color:#a61717;background-color:#e3d2d2">/div&gt;</span>
</span></span><span style="display:flex;"><span>    )
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="2key">2.key</h3>
<p><img src="https://i.loli.net/2020/12/28/mIt3Gk7YTpoysuL.jpg" alt=""></p>
<p>运行代码之后，页面会正常显示，但是控制台会报一个错误。<code>Each child in a list should have a unique &quot;key&quot; prop.</code>，意思是当你创建一个元素时，必须包括一个特殊的 <code>key</code> 属性。</p>
<p>现在给每个列表元素分配一个key：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#8b008b;font-weight:bold">function</span> NumberList(props) {
</span></span><span style="display:flex;"><span>  <span style="color:#8b008b;font-weight:bold">const</span> numbers = props.numbers;
</span></span><span style="display:flex;"><span>  <span style="color:#8b008b;font-weight:bold">const</span> listItems = numbers.map((number) =&gt;
</span></span><span style="display:flex;"><span>    &lt;li key={number.toString()}&gt;
</span></span><span style="display:flex;"><span>      {number}
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#a61717;background-color:#e3d2d2">/li&gt;</span>
</span></span><span style="display:flex;"><span>  );
</span></span><span style="display:flex;"><span>  <span style="color:#8b008b;font-weight:bold">return</span> (
</span></span><span style="display:flex;"><span>    &lt;ul&gt;{listItems}&lt;<span style="color:#a61717;background-color:#e3d2d2">/ul&gt;</span>
</span></span><span style="display:flex;"><span>  );
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#8b008b;font-weight:bold">const</span> numbers = [<span style="color:#b452cd">1</span>, <span style="color:#b452cd">2</span>, <span style="color:#b452cd">3</span>, <span style="color:#b452cd">4</span>, <span style="color:#b452cd">5</span>];
</span></span><span style="display:flex;"><span>ReactDOM.render(
</span></span><span style="display:flex;"><span>  &lt;NumberList numbers={numbers} /&gt;,
</span></span><span style="display:flex;"><span>  <span style="color:#658b00">document</span>.getElementById(<span style="color:#cd5555">&#39;root&#39;</span>)
</span></span><span style="display:flex;"><span>);
</span></span></code></pre></div><h3 id="3使用-id-作为-key">3.使用 id 作为 key</h3>
<p><code>key</code> 帮助 React 识别了哪些元素被改变，比如删除和添加，所以应当给每个元素确定一个标识，也就是 <code>key</code>。</p>
<p>一个元素的 <code>key</code> 最好是这个元素在列表中拥有的一个独一无二的字符串。通常，我们使用数据中的 <code>id</code> 来作为元素的 <code>key</code>：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#228b22">// Map.js
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span><span style="color:#8b008b;font-weight:bold">export</span> <span style="color:#8b008b;font-weight:bold">default</span> <span style="color:#8b008b;font-weight:bold">class</span> Map <span style="color:#8b008b;font-weight:bold">extends</span> Component {
</span></span><span style="display:flex;"><span>  render() {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">function</span> NumberList(props) {
</span></span><span style="display:flex;"><span>      <span style="color:#8b008b;font-weight:bold">const</span> numbers = props.numbers;
</span></span><span style="display:flex;"><span>      <span style="color:#8b008b;font-weight:bold">const</span> listItems = numbers.map((number) =&gt;
</span></span><span style="display:flex;"><span>        &lt;li key={number.id}&gt;  <span style="color:#228b22">// 赋值 key
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>          {number.text}
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#a61717;background-color:#e3d2d2">/li&gt;</span>
</span></span><span style="display:flex;"><span>      );
</span></span><span style="display:flex;"><span>      <span style="color:#8b008b;font-weight:bold">return</span> (
</span></span><span style="display:flex;"><span>        &lt;ul&gt;{listItems}&lt;<span style="color:#a61717;background-color:#e3d2d2">/ul&gt;</span>
</span></span><span style="display:flex;"><span>      );
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#228b22">// 传入数据
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>    <span style="color:#8b008b;font-weight:bold">const</span> numbers = [
</span></span><span style="display:flex;"><span>      {id: <span style="color:#b452cd">1</span>,text: <span style="color:#b452cd">1</span>},
</span></span><span style="display:flex;"><span>      {id: <span style="color:#b452cd">2</span>,text: <span style="color:#b452cd">2</span>},
</span></span><span style="display:flex;"><span>      {id: <span style="color:#b452cd">3</span>,text: <span style="color:#b452cd">3</span>},
</span></span><span style="display:flex;"><span>      {id: <span style="color:#b452cd">4</span>,text: <span style="color:#b452cd">4</span>},
</span></span><span style="display:flex;"><span>      {id: <span style="color:#b452cd">5</span>,text: <span style="color:#b452cd">5</span>}
</span></span><span style="display:flex;"><span>    ];
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">return</span> (
</span></span><span style="display:flex;"><span>      &lt;Fragment&gt;
</span></span><span style="display:flex;"><span>        &lt;NumberList numbers={numbers} /&gt;
</span></span><span style="display:flex;"><span>      &lt;<span style="color:#a61717;background-color:#e3d2d2">/Fragment&gt;</span>
</span></span><span style="display:flex;"><span>    )
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="4索引-index-可以作为-key-吗">4.索引 index 可以作为 key 吗？</h3>
<p>当元素没有确定 id 的时候，万不得已你可以使用元素索引 <code>index</code> 作为 <code>key</code>：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#8b008b;font-weight:bold">const</span> todoItems = todos.map((todo, index) =&gt;
</span></span><span style="display:flex;"><span>  <span style="color:#228b22">// 仅仅当没有确定 id 的时候使用索引index作为 key
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>  &lt;li key={index}&gt;
</span></span><span style="display:flex;"><span>    {todo.text}
</span></span><span style="display:flex;"><span>  &lt;<span style="color:#a61717;background-color:#e3d2d2">/li&gt;</span>
</span></span><span style="display:flex;"><span>);
</span></span></code></pre></div><p>如果列表项目的顺序可能会变化，我们不建议使用索引来用作 <code>key</code> 值，因为这样做会导致性能变差，还可能引起组件状态的问题。</p>
<h3 id="5用-key-提取组件">5.用 key 提取组件</h3>
<p>比方说，如果你提取出一个 <code>ListItem</code> 组件，你应该把 <code>key</code> 保留在数组中的这个 <code>&lt;ListItem /&gt;</code> 元素上，而不是放在 <code>ListItem</code> 组件中的 <code>&lt;li&gt;</code> 元素上。</p>
<p><!-- raw HTML omitted -->错误的使用方法：<!-- raw HTML omitted --></p>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#8b008b;font-weight:bold">function</span> ListItem(props) {
</span></span><span style="display:flex;"><span>  <span style="color:#8b008b;font-weight:bold">const</span> value = props.value;
</span></span><span style="display:flex;"><span>  <span style="color:#8b008b;font-weight:bold">return</span> (
</span></span><span style="display:flex;"><span>    <span style="color:#228b22">// 错误！你不需要在这里指定 key：
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>    &lt;li key={value.toString()}&gt;
</span></span><span style="display:flex;"><span>      {value}
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#a61717;background-color:#e3d2d2">/li&gt;</span>
</span></span><span style="display:flex;"><span>  );
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#8b008b;font-weight:bold">function</span> NumberList(props) {
</span></span><span style="display:flex;"><span>  <span style="color:#8b008b;font-weight:bold">const</span> numbers = props.numbers;
</span></span><span style="display:flex;"><span>  <span style="color:#8b008b;font-weight:bold">const</span> listItems = numbers.map((number) =&gt;
</span></span><span style="display:flex;"><span>    <span style="color:#228b22">// 错误！元素的 key 应该在这里指定：
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>    &lt;ListItem value={number} /&gt;
</span></span><span style="display:flex;"><span>  );
</span></span><span style="display:flex;"><span>  <span style="color:#8b008b;font-weight:bold">return</span> (
</span></span><span style="display:flex;"><span>    &lt;ul&gt;
</span></span><span style="display:flex;"><span>      {listItems}
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#a61717;background-color:#e3d2d2">/ul&gt;</span>
</span></span><span style="display:flex;"><span>  );
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#8b008b;font-weight:bold">const</span> numbers = [<span style="color:#b452cd">1</span>, <span style="color:#b452cd">2</span>, <span style="color:#b452cd">3</span>, <span style="color:#b452cd">4</span>, <span style="color:#b452cd">5</span>];
</span></span><span style="display:flex;"><span>ReactDOM.render(
</span></span><span style="display:flex;"><span>  &lt;NumberList numbers={numbers} /&gt;,
</span></span><span style="display:flex;"><span>  <span style="color:#658b00">document</span>.getElementById(<span style="color:#cd5555">&#39;root&#39;</span>)
</span></span><span style="display:flex;"><span>);
</span></span></code></pre></div><p><!-- raw HTML omitted -->正确的使用方法：<!-- raw HTML omitted --></p>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#8b008b;font-weight:bold">function</span> ListItem(props) {
</span></span><span style="display:flex;"><span>  <span style="color:#228b22">// 正确！这里不需要指定 key：
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>  <span style="color:#8b008b;font-weight:bold">return</span> &lt;li&gt;{props.value}&lt;<span style="color:#a61717;background-color:#e3d2d2">/li&gt;;</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#8b008b;font-weight:bold">function</span> NumberList(props) {
</span></span><span style="display:flex;"><span>  <span style="color:#8b008b;font-weight:bold">const</span> numbers = props.numbers;
</span></span><span style="display:flex;"><span>  <span style="color:#8b008b;font-weight:bold">const</span> listItems = numbers.map((number) =&gt;
</span></span><span style="display:flex;"><span>    <span style="color:#228b22">// 正确！key 应该在数组的上下文中被指定
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>    &lt;ListItem key={number.toString()}              value={number} /&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  );
</span></span><span style="display:flex;"><span>  <span style="color:#8b008b;font-weight:bold">return</span> (
</span></span><span style="display:flex;"><span>    &lt;ul&gt;
</span></span><span style="display:flex;"><span>      {listItems}
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#a61717;background-color:#e3d2d2">/ul&gt;</span>
</span></span><span style="display:flex;"><span>  );
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#8b008b;font-weight:bold">const</span> numbers = [<span style="color:#b452cd">1</span>, <span style="color:#b452cd">2</span>, <span style="color:#b452cd">3</span>, <span style="color:#b452cd">4</span>, <span style="color:#b452cd">5</span>];
</span></span><span style="display:flex;"><span>ReactDOM.render(
</span></span><span style="display:flex;"><span>  &lt;NumberList numbers={numbers} /&gt;,
</span></span><span style="display:flex;"><span>  <span style="color:#658b00">document</span>.getElementById(<span style="color:#cd5555">&#39;root&#39;</span>)
</span></span><span style="display:flex;"><span>);
</span></span></code></pre></div><blockquote>
<p>React：一个好的经验法则是：在 map( ) 方法中的元素需要设置 key 属性。</p>
</blockquote>
<h3 id="6key-只是在兄弟节点之间必须唯一">6.key 只是在兄弟节点之间必须唯一</h3>
<p>数组元素中使用的 <code>key</code> 在其兄弟节点之间应该是独一无二的。然而，它们不需要是全局唯一的。当我们生成两个不同的数组时，我们可以使用相同的 <code>key</code> 值：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#8b008b;font-weight:bold">function</span> Blog(props) {
</span></span><span style="display:flex;"><span>  <span style="color:#8b008b;font-weight:bold">const</span> sidebar = (
</span></span><span style="display:flex;"><span>    &lt;ul&gt;
</span></span><span style="display:flex;"><span>      {props.posts.map((post) =&gt;
</span></span><span style="display:flex;"><span>        &lt;li key={post.id}&gt;
</span></span><span style="display:flex;"><span>          {post.title}
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#a61717;background-color:#e3d2d2">/li&gt;</span>
</span></span><span style="display:flex;"><span>      )}
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#a61717;background-color:#e3d2d2">/ul&gt;</span>
</span></span><span style="display:flex;"><span>  );
</span></span><span style="display:flex;"><span>  <span style="color:#8b008b;font-weight:bold">const</span> content = props.posts.map((post) =&gt;
</span></span><span style="display:flex;"><span>    &lt;div key={post.id}&gt;
</span></span><span style="display:flex;"><span>      &lt;h3&gt;{post.title}&lt;<span style="color:#a61717;background-color:#e3d2d2">/h3&gt;</span>
</span></span><span style="display:flex;"><span>      &lt;p&gt;{post.content}&lt;<span style="color:#a61717;background-color:#e3d2d2">/p&gt;</span>
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#a61717;background-color:#e3d2d2">/div&gt;</span>
</span></span><span style="display:flex;"><span>  );
</span></span><span style="display:flex;"><span>  <span style="color:#8b008b;font-weight:bold">return</span> (
</span></span><span style="display:flex;"><span>    &lt;div&gt;
</span></span><span style="display:flex;"><span>      {sidebar}
</span></span><span style="display:flex;"><span>      &lt;hr /&gt;
</span></span><span style="display:flex;"><span>      {content}
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#a61717;background-color:#e3d2d2">/div&gt;</span>
</span></span><span style="display:flex;"><span>  );
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#8b008b;font-weight:bold">const</span> posts = [
</span></span><span style="display:flex;"><span>  {id: <span style="color:#b452cd">1</span>, title: <span style="color:#cd5555">&#39;Hello World&#39;</span>, content: <span style="color:#cd5555">&#39;Welcome to learning React!&#39;</span>},
</span></span><span style="display:flex;"><span>  {id: <span style="color:#b452cd">2</span>, title: <span style="color:#cd5555">&#39;Installation&#39;</span>, content: <span style="color:#cd5555">&#39;You can install React from npm.&#39;</span>}
</span></span><span style="display:flex;"><span>];
</span></span><span style="display:flex;"><span>ReactDOM.render(
</span></span><span style="display:flex;"><span>  &lt;Blog posts={posts} /&gt;,
</span></span><span style="display:flex;"><span>  <span style="color:#658b00">document</span>.getElementById(<span style="color:#cd5555">&#39;root&#39;</span>)
</span></span><span style="display:flex;"><span>);
</span></span></code></pre></div><h3 id="7vue-中渲染列表">7.vue 中渲染列表</h3>
<p>Vue 中渲染列表使用的是特殊指令 <code>v-for</code>，其中也有 <code>key</code> 的相关用法</p>
<p>React 中采用的是 <code>map()</code> 方法遍历数组，然后渲染列表</p>
<hr>
<p>title: React 学习笔记（二）
date: 2020-12-16 13:15:00
updated: 2021-11-09 15:19:31
categories:</p>
<ul>
<li>技术
tags:</li>
<li>react</li>
</ul>
<hr>
<p>React 元素的事件处理和 DOM 元素的很相似，但是有一点语法上的不同</p>
<p>React 事件的命名采用小驼峰式（camelCase），而不是纯小写</p>
<p>使用 JSX 语法时你需要传入一个函数作为事件处理函数，而不是一个字符串</p>
<!-- raw HTML omitted -->
<h2 id="一事件处理-1">一、事件处理</h2>
<h3 id="1事件绑定-1">1.事件绑定</h3>
<p>React 元素的事件处理和 DOM 元素类似，但是在语法上有些区别，比如：</p>
<p><strong>传统的html</strong>：用双引号包裹，后面必须跟参数</p>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>&lt;<span style="color:#8b008b;font-weight:bold">button</span> <span style="color:#658b00">onclick</span>=<span style="color:#cd5555">&#34;myfun()&#34;</span>&gt;点击&lt;/<span style="color:#8b008b;font-weight:bold">button</span>&gt;
</span></span></code></pre></div><p><strong>React</strong>：用大括号包裹，后面不跟参数</p>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>&lt;<span style="color:#8b008b;font-weight:bold">button</span> <span style="color:#658b00">onclick</span>=<span style="color:#cd5555">{myfun}</span>&gt;点击&lt;/<span style="color:#8b008b;font-weight:bold">button</span>&gt;
</span></span></code></pre></div><p>一个完整的事件函数代码如下</p>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#8b008b;font-weight:bold">class</span> Demo <span style="color:#8b008b;font-weight:bold">extends</span> React.Component {
</span></span><span style="display:flex;"><span>    render() {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#228b22">// 事件函数
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>        <span style="color:#8b008b;font-weight:bold">function</span> myfun() {
</span></span><span style="display:flex;"><span>            alert(<span style="color:#cd5555">&#39;helo,world&#39;</span>)
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#8b008b;font-weight:bold">return</span> (
</span></span><span style="display:flex;"><span>            <span style="color:#228b22">// 绑定事件
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>            &lt;button onClick={<span style="color:#8b008b;font-weight:bold">this</span>.myfun}&gt;
</span></span><span style="display:flex;"><span>                Activate Lasers
</span></span><span style="display:flex;"><span>            &lt;<span style="color:#a61717;background-color:#e3d2d2">/button&gt;</span>
</span></span><span style="display:flex;"><span>        )
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>ReactDOM.render(
</span></span><span style="display:flex;"><span>    &lt;Demo /&gt;,
</span></span><span style="display:flex;"><span>    <span style="color:#658b00">document</span>.getElementById(<span style="color:#cd5555">&#39;root&#39;</span>)
</span></span><span style="display:flex;"><span>)
</span></span></code></pre></div><blockquote>
<p>如果方法后面没有<code>()</code>，则需要为这个方法绑定 <code>this</code></p>
</blockquote>
<h3 id="2阻止默认行为-1">2.阻止默认行为</h3>
<p>在 React 中还有一个不同的点，不能通过返回 fasle 阻止默认行为， React 提供了一个属性－－<code>preventDefault</code>，可以通过 preventDefault 阻止脚本执行</p>
<p>看一下传统的 html 和 React 的对比</p>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>&lt;<span style="color:#8b008b;font-weight:bold">a</span> <span style="color:#658b00">href</span>=<span style="color:#cd5555">&#34;#&#34;</span> <span style="color:#658b00">onclick</span>=<span style="color:#cd5555">&#34;alert(&#39;是否弹窗？&#39;);return false&#34;</span>&gt;
</span></span><span style="display:flex;"><span>    Click me
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#8b008b;font-weight:bold">a</span>&gt;
</span></span></code></pre></div><p>直接在写上 false 就可以阻止脚本执行</p>
<p>React 通过 preventDefault 属性阻止脚本执行：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#8b008b;font-weight:bold">function</span> ActionLink() {
</span></span><span style="display:flex;"><span>  <span style="color:#8b008b;font-weight:bold">function</span> handleClick(e) {
</span></span><span style="display:flex;"><span>    e.preventDefault();
</span></span><span style="display:flex;"><span>    console.log(<span style="color:#cd5555">&#39;The link was clicked.&#39;</span>);
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#8b008b;font-weight:bold">return</span> (
</span></span><span style="display:flex;"><span>    &lt;a href=<span style="color:#cd5555">&#34;#&#34;</span> onClick={handleClick}&gt;
</span></span><span style="display:flex;"><span>      Click me
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#a61717;background-color:#e3d2d2">/a&gt;</span>
</span></span><span style="display:flex;"><span>  );
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h2 id="二条件渲染-1">二、条件渲染</h2>
<p>在 React 中，可以创建不同的组件来封装各种你需要的行为，然后，根据应用不同的状态，你可以只渲染对应状态下的部分内容。</p>
<p>React 中的条件渲染和 javascript 中的一样，使用 <code>if</code> 运算符来表示元素当前的状态，然后让 React 根据他们来更新 UI。</p>
<h3 id="使用-ifelse-语句进行条件渲染-1">使用 if..else 语句进行条件渲染</h3>
<p>先写一个条件渲染的例子，定义了两个组件，然后通过判断组件 <code>Greeting</code> 中的变量 <code>isLoggedIn</code> 的真伪，让浏览器渲染组件 <code>UserGreeting</code> 或者 <code>GuestGreeting</code>。</p>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#228b22">// App.js
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span><span style="color:#8b008b;font-weight:bold">import</span> React, { Component } from <span style="color:#cd5555">&#39;react&#39;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#8b008b;font-weight:bold">export</span> <span style="color:#8b008b;font-weight:bold">default</span> <span style="color:#8b008b;font-weight:bold">class</span> App <span style="color:#8b008b;font-weight:bold">extends</span> Component {
</span></span><span style="display:flex;"><span>  render() {
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">function</span> UserGreeting(props) {
</span></span><span style="display:flex;"><span>      <span style="color:#8b008b;font-weight:bold">return</span> &lt;h3&gt;Welcome back!&lt;<span style="color:#a61717;background-color:#e3d2d2">/h3&gt;;</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">function</span> GuestGreeting(props) {
</span></span><span style="display:flex;"><span>      <span style="color:#8b008b;font-weight:bold">return</span> &lt;h3&gt;Please sign up.&lt;<span style="color:#a61717;background-color:#e3d2d2">/h3&gt;;</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">function</span> Greeting(props) {
</span></span><span style="display:flex;"><span>      <span style="color:#8b008b;font-weight:bold">const</span> isLoggedIn = props.isLoggedIn;
</span></span><span style="display:flex;"><span>      <span style="color:#8b008b;font-weight:bold">if</span> (isLoggedIn) {
</span></span><span style="display:flex;"><span>        <span style="color:#8b008b;font-weight:bold">return</span> &lt;UserGreeting /&gt;;
</span></span><span style="display:flex;"><span>      }   
</span></span><span style="display:flex;"><span>      <span style="color:#8b008b;font-weight:bold">return</span> &lt;GuestGreeting /&gt;;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">return</span> (
</span></span><span style="display:flex;"><span>      &lt;div&gt;
</span></span><span style="display:flex;"><span>        &lt;Greeting isLoggedIn={<span style="color:#8b008b;font-weight:bold">false</span>} /&gt;
</span></span><span style="display:flex;"><span>      &lt;<span style="color:#a61717;background-color:#e3d2d2">/div&gt;</span>
</span></span><span style="display:flex;"><span>    )
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>最后变量 <code>isLoggedIn</code> 定义了 <code>false</code>，因此，浏览器渲染 `GuestGreeting。</p>
<h3 id="怎么阻止条件渲染-1">怎么阻止条件渲染？</h3>
<p>在有些情况下，我们希望能隐藏组件，即使他已经被其他组件渲染。我们可以通过 <code>render</code> 方法返回 <code>null</code> 让组件不渲染。</p>
<p>下面的示例中，<!-- raw HTML omitted --> 会根据 prop 中 <code>warn</code> 的值来进行条件渲染。如果 <code>warn</code> 的值是 <code>false</code>，那么组件则不会渲染:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#8b008b;font-weight:bold">function</span> WarningBanner(props) {
</span></span><span style="display:flex;"><span>  <span style="color:#8b008b;font-weight:bold">if</span> (!props.warn) {
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">return</span> <span style="color:#8b008b;font-weight:bold">null</span>;
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#8b008b;font-weight:bold">return</span> (
</span></span><span style="display:flex;"><span>    &lt;div className=<span style="color:#cd5555">&#34;warning&#34;</span>&gt;
</span></span><span style="display:flex;"><span>      Warning!
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#a61717;background-color:#e3d2d2">/div&gt;</span>
</span></span><span style="display:flex;"><span>  );
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#8b008b;font-weight:bold">class</span> Page <span style="color:#8b008b;font-weight:bold">extends</span> React.Component {
</span></span><span style="display:flex;"><span>  constructor(props) {
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">super</span>(props);
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">this</span>.state = {showWarning: <span style="color:#8b008b;font-weight:bold">true</span>};
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">this</span>.handleToggleClick = <span style="color:#8b008b;font-weight:bold">this</span>.handleToggleClick.bind(<span style="color:#8b008b;font-weight:bold">this</span>);
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  handleToggleClick() {
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">this</span>.setState(state =&gt; ({
</span></span><span style="display:flex;"><span>      showWarning: !state.showWarning
</span></span><span style="display:flex;"><span>    }));
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  render() {
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">return</span> (
</span></span><span style="display:flex;"><span>      &lt;div&gt;
</span></span><span style="display:flex;"><span>        &lt;WarningBanner warn={<span style="color:#8b008b;font-weight:bold">this</span>.state.showWarning} /&gt;
</span></span><span style="display:flex;"><span>        &lt;button onClick={<span style="color:#8b008b;font-weight:bold">this</span>.handleToggleClick}&gt;
</span></span><span style="display:flex;"><span>          {<span style="color:#8b008b;font-weight:bold">this</span>.state.showWarning ? <span style="color:#cd5555">&#39;Hide&#39;</span> : <span style="color:#cd5555">&#39;Show&#39;</span>}
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#a61717;background-color:#e3d2d2">/button&gt;</span>
</span></span><span style="display:flex;"><span>      &lt;<span style="color:#a61717;background-color:#e3d2d2">/div&gt;</span>
</span></span><span style="display:flex;"><span>    );
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>ReactDOM.render(
</span></span><span style="display:flex;"><span>  &lt;Page /&gt;,
</span></span><span style="display:flex;"><span>  <span style="color:#658b00">document</span>.getElementById(<span style="color:#cd5555">&#39;root&#39;</span>)
</span></span><span style="display:flex;"><span>);
</span></span></code></pre></div><h2 id="三渲染列表-1">三、渲染列表</h2>
<p>先看一段代码，我们使用 <code>map()</code> 函数让数组中的每一项变双倍，然后得到一个新的数组 <code>doubled</code> 并打印出来。</p>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#8b008b;font-weight:bold">const</span> numbers = [<span style="color:#b452cd">1</span>, <span style="color:#b452cd">2</span>, <span style="color:#b452cd">3</span>, <span style="color:#b452cd">4</span>, <span style="color:#b452cd">5</span>];
</span></span><span style="display:flex;"><span><span style="color:#8b008b;font-weight:bold">const</span> doubled = numbers.map((number) =&gt; number * <span style="color:#b452cd">2</span>);
</span></span><span style="display:flex;"><span>console.log(doubled);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#228b22">// [2,4,6,8,10]
</span></span></span></code></pre></div><p>而在 React 中，把数组转换为元素列表的过程是相似的。</p>
<p>先通过 <code>map()</code> 方法遍历 <code>numbers</code> 数组，将数组中的每个元素变成 <code>&lt;li&gt;</code> 标签，最后将得到的数组赋值给 <code>listItems</code> 。</p>
<p>然后返回 <code>{listItem}</code> 。</p>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#228b22">// Map.js
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span><span style="color:#8b008b;font-weight:bold">const</span> numbers = [<span style="color:#b452cd">1</span>, <span style="color:#b452cd">2</span>, <span style="color:#b452cd">3</span>, <span style="color:#b452cd">4</span>, <span style="color:#b452cd">5</span>];
</span></span><span style="display:flex;"><span><span style="color:#8b008b;font-weight:bold">const</span> listItems = numbers.map((number) =&gt;
</span></span><span style="display:flex;"><span>  &lt;li&gt;{number}&lt;<span style="color:#a61717;background-color:#e3d2d2">/li&gt;</span>
</span></span><span style="display:flex;"><span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>ReactDOM.render(
</span></span><span style="display:flex;"><span>  &lt;ul&gt;{listItems}&lt;<span style="color:#a61717;background-color:#e3d2d2">/ul&gt;,</span>
</span></span><span style="display:flex;"><span>  <span style="color:#658b00">document</span>.getElementById(<span style="color:#cd5555">&#39;root&#39;</span>)
</span></span><span style="display:flex;"><span>);
</span></span></code></pre></div><p>运行之后浏览器出现 1-5 的无序列表</p>
<h3 id="1分离组件-1">1.分离组件</h3>
<p>上面就是一个基本的列表渲染的例子，但是数据写死了。接下来我们将数组重构成一个组件，以后再进行数组渲染时，可以轻松调用。</p>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#228b22">// Map.js
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span><span style="color:#8b008b;font-weight:bold">export</span> <span style="color:#8b008b;font-weight:bold">default</span> <span style="color:#8b008b;font-weight:bold">class</span> Map <span style="color:#8b008b;font-weight:bold">extends</span> Component {
</span></span><span style="display:flex;"><span>  render() {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#228b22">// 分离出组件 NumberList 作为转换数组的组件
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>    <span style="color:#8b008b;font-weight:bold">function</span> NumberList(props) {
</span></span><span style="display:flex;"><span>      <span style="color:#8b008b;font-weight:bold">const</span> numbers = props.numbers;
</span></span><span style="display:flex;"><span>      <span style="color:#8b008b;font-weight:bold">const</span> listItems = numbers.map((number) =&gt;
</span></span><span style="display:flex;"><span>        &lt;li&gt;{number}&lt;<span style="color:#a61717;background-color:#e3d2d2">/li&gt;</span>
</span></span><span style="display:flex;"><span>      );
</span></span><span style="display:flex;"><span>      <span style="color:#8b008b;font-weight:bold">return</span> (
</span></span><span style="display:flex;"><span>        &lt;ul&gt;{listItems}&lt;<span style="color:#a61717;background-color:#e3d2d2">/ul&gt;</span>
</span></span><span style="display:flex;"><span>      );
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#228b22">// 传入需要的数据
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>    <span style="color:#8b008b;font-weight:bold">const</span> numbers = [<span style="color:#b452cd">1</span>, <span style="color:#b452cd">2</span>, <span style="color:#b452cd">3</span>, <span style="color:#b452cd">4</span>, <span style="color:#b452cd">5</span>, <span style="color:#b452cd">6</span>, <span style="color:#b452cd">7</span>];
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">return</span> (
</span></span><span style="display:flex;"><span>      &lt;div&gt;
</span></span><span style="display:flex;"><span>        &lt;NumberList numbers={numbers} /&gt;
</span></span><span style="display:flex;"><span>      &lt;<span style="color:#a61717;background-color:#e3d2d2">/div&gt;</span>
</span></span><span style="display:flex;"><span>    )
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="2key-1">2.key</h3>
<p><img src="https://i.loli.net/2020/12/28/mIt3Gk7YTpoysuL.jpg" alt=""></p>
<p>运行代码之后，页面会正常显示，但是控制台会报一个错误。<code>Each child in a list should have a unique &quot;key&quot; prop.</code>，意思是当你创建一个元素时，必须包括一个特殊的 <code>key</code> 属性。</p>
<p>现在给每个列表元素分配一个key：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#8b008b;font-weight:bold">function</span> NumberList(props) {
</span></span><span style="display:flex;"><span>  <span style="color:#8b008b;font-weight:bold">const</span> numbers = props.numbers;
</span></span><span style="display:flex;"><span>  <span style="color:#8b008b;font-weight:bold">const</span> listItems = numbers.map((number) =&gt;
</span></span><span style="display:flex;"><span>    &lt;li key={number.toString()}&gt;
</span></span><span style="display:flex;"><span>      {number}
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#a61717;background-color:#e3d2d2">/li&gt;</span>
</span></span><span style="display:flex;"><span>  );
</span></span><span style="display:flex;"><span>  <span style="color:#8b008b;font-weight:bold">return</span> (
</span></span><span style="display:flex;"><span>    &lt;ul&gt;{listItems}&lt;<span style="color:#a61717;background-color:#e3d2d2">/ul&gt;</span>
</span></span><span style="display:flex;"><span>  );
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#8b008b;font-weight:bold">const</span> numbers = [<span style="color:#b452cd">1</span>, <span style="color:#b452cd">2</span>, <span style="color:#b452cd">3</span>, <span style="color:#b452cd">4</span>, <span style="color:#b452cd">5</span>];
</span></span><span style="display:flex;"><span>ReactDOM.render(
</span></span><span style="display:flex;"><span>  &lt;NumberList numbers={numbers} /&gt;,
</span></span><span style="display:flex;"><span>  <span style="color:#658b00">document</span>.getElementById(<span style="color:#cd5555">&#39;root&#39;</span>)
</span></span><span style="display:flex;"><span>);
</span></span></code></pre></div><h3 id="3使用-id-作为-key-1">3.使用 id 作为 key</h3>
<p><code>key</code> 帮助 React 识别了哪些元素被改变，比如删除和添加，所以应当给每个元素确定一个标识，也就是 <code>key</code>。</p>
<p>一个元素的 <code>key</code> 最好是这个元素在列表中拥有的一个独一无二的字符串。通常，我们使用数据中的 <code>id</code> 来作为元素的 <code>key</code>：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#228b22">// Map.js
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span><span style="color:#8b008b;font-weight:bold">export</span> <span style="color:#8b008b;font-weight:bold">default</span> <span style="color:#8b008b;font-weight:bold">class</span> Map <span style="color:#8b008b;font-weight:bold">extends</span> Component {
</span></span><span style="display:flex;"><span>  render() {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">function</span> NumberList(props) {
</span></span><span style="display:flex;"><span>      <span style="color:#8b008b;font-weight:bold">const</span> numbers = props.numbers;
</span></span><span style="display:flex;"><span>      <span style="color:#8b008b;font-weight:bold">const</span> listItems = numbers.map((number) =&gt;
</span></span><span style="display:flex;"><span>        &lt;li key={number.id}&gt;  <span style="color:#228b22">// 赋值 key
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>          {number.text}
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#a61717;background-color:#e3d2d2">/li&gt;</span>
</span></span><span style="display:flex;"><span>      );
</span></span><span style="display:flex;"><span>      <span style="color:#8b008b;font-weight:bold">return</span> (
</span></span><span style="display:flex;"><span>        &lt;ul&gt;{listItems}&lt;<span style="color:#a61717;background-color:#e3d2d2">/ul&gt;</span>
</span></span><span style="display:flex;"><span>      );
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#228b22">// 传入数据
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>    <span style="color:#8b008b;font-weight:bold">const</span> numbers = [
</span></span><span style="display:flex;"><span>      {id: <span style="color:#b452cd">1</span>,text: <span style="color:#b452cd">1</span>},
</span></span><span style="display:flex;"><span>      {id: <span style="color:#b452cd">2</span>,text: <span style="color:#b452cd">2</span>},
</span></span><span style="display:flex;"><span>      {id: <span style="color:#b452cd">3</span>,text: <span style="color:#b452cd">3</span>},
</span></span><span style="display:flex;"><span>      {id: <span style="color:#b452cd">4</span>,text: <span style="color:#b452cd">4</span>},
</span></span><span style="display:flex;"><span>      {id: <span style="color:#b452cd">5</span>,text: <span style="color:#b452cd">5</span>}
</span></span><span style="display:flex;"><span>    ];
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#8b008b;font-weight:bold">return</span> (
</span></span><span style="display:flex;"><span>      &lt;Fragment&gt;
</span></span><span style="display:flex;"><span>        &lt;NumberList numbers={numbers} /&gt;
</span></span><span style="display:flex;"><span>      &lt;<span style="color:#a61717;background-color:#e3d2d2">/Fragment&gt;</span>
</span></span><span style="display:flex;"><span>    )
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="4索引-index-可以作为-key-吗-1">4.索引 index 可以作为 key 吗？</h3>
<p>当元素没有确定 id 的时候，万不得已你可以使用元素索引 <code>index</code> 作为 <code>key</code>：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#8b008b;font-weight:bold">const</span> todoItems = todos.map((todo, index) =&gt;
</span></span><span style="display:flex;"><span>  <span style="color:#228b22">// 仅仅当没有确定 id 的时候使用索引index作为 key
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>  &lt;li key={index}&gt;
</span></span><span style="display:flex;"><span>    {todo.text}
</span></span><span style="display:flex;"><span>  &lt;<span style="color:#a61717;background-color:#e3d2d2">/li&gt;</span>
</span></span><span style="display:flex;"><span>);
</span></span></code></pre></div><p>如果列表项目的顺序可能会变化，我们不建议使用索引来用作 <code>key</code> 值，因为这样做会导致性能变差，还可能引起组件状态的问题。</p>
<h3 id="5用-key-提取组件-1">5.用 key 提取组件</h3>
<p>比方说，如果你提取出一个 <code>ListItem</code> 组件，你应该把 <code>key</code> 保留在数组中的这个 <code>&lt;ListItem /&gt;</code> 元素上，而不是放在 <code>ListItem</code> 组件中的 <code>&lt;li&gt;</code> 元素上。</p>
<p><!-- raw HTML omitted -->错误的使用方法：<!-- raw HTML omitted --></p>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#8b008b;font-weight:bold">function</span> ListItem(props) {
</span></span><span style="display:flex;"><span>  <span style="color:#8b008b;font-weight:bold">const</span> value = props.value;
</span></span><span style="display:flex;"><span>  <span style="color:#8b008b;font-weight:bold">return</span> (
</span></span><span style="display:flex;"><span>    <span style="color:#228b22">// 错误！你不需要在这里指定 key：
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>    &lt;li key={value.toString()}&gt;
</span></span><span style="display:flex;"><span>      {value}
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#a61717;background-color:#e3d2d2">/li&gt;</span>
</span></span><span style="display:flex;"><span>  );
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#8b008b;font-weight:bold">function</span> NumberList(props) {
</span></span><span style="display:flex;"><span>  <span style="color:#8b008b;font-weight:bold">const</span> numbers = props.numbers;
</span></span><span style="display:flex;"><span>  <span style="color:#8b008b;font-weight:bold">const</span> listItems = numbers.map((number) =&gt;
</span></span><span style="display:flex;"><span>    <span style="color:#228b22">// 错误！元素的 key 应该在这里指定：
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>    &lt;ListItem value={number} /&gt;
</span></span><span style="display:flex;"><span>  );
</span></span><span style="display:flex;"><span>  <span style="color:#8b008b;font-weight:bold">return</span> (
</span></span><span style="display:flex;"><span>    &lt;ul&gt;
</span></span><span style="display:flex;"><span>      {listItems}
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#a61717;background-color:#e3d2d2">/ul&gt;</span>
</span></span><span style="display:flex;"><span>  );
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#8b008b;font-weight:bold">const</span> numbers = [<span style="color:#b452cd">1</span>, <span style="color:#b452cd">2</span>, <span style="color:#b452cd">3</span>, <span style="color:#b452cd">4</span>, <span style="color:#b452cd">5</span>];
</span></span><span style="display:flex;"><span>ReactDOM.render(
</span></span><span style="display:flex;"><span>  &lt;NumberList numbers={numbers} /&gt;,
</span></span><span style="display:flex;"><span>  <span style="color:#658b00">document</span>.getElementById(<span style="color:#cd5555">&#39;root&#39;</span>)
</span></span><span style="display:flex;"><span>);
</span></span></code></pre></div><p><!-- raw HTML omitted -->正确的使用方法：<!-- raw HTML omitted --></p>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#8b008b;font-weight:bold">function</span> ListItem(props) {
</span></span><span style="display:flex;"><span>  <span style="color:#228b22">// 正确！这里不需要指定 key：
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>  <span style="color:#8b008b;font-weight:bold">return</span> &lt;li&gt;{props.value}&lt;<span style="color:#a61717;background-color:#e3d2d2">/li&gt;;</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#8b008b;font-weight:bold">function</span> NumberList(props) {
</span></span><span style="display:flex;"><span>  <span style="color:#8b008b;font-weight:bold">const</span> numbers = props.numbers;
</span></span><span style="display:flex;"><span>  <span style="color:#8b008b;font-weight:bold">const</span> listItems = numbers.map((number) =&gt;
</span></span><span style="display:flex;"><span>    <span style="color:#228b22">// 正确！key 应该在数组的上下文中被指定
</span></span></span><span style="display:flex;"><span><span style="color:#228b22"></span>    &lt;ListItem key={number.toString()}              value={number} /&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  );
</span></span><span style="display:flex;"><span>  <span style="color:#8b008b;font-weight:bold">return</span> (
</span></span><span style="display:flex;"><span>    &lt;ul&gt;
</span></span><span style="display:flex;"><span>      {listItems}
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#a61717;background-color:#e3d2d2">/ul&gt;</span>
</span></span><span style="display:flex;"><span>  );
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#8b008b;font-weight:bold">const</span> numbers = [<span style="color:#b452cd">1</span>, <span style="color:#b452cd">2</span>, <span style="color:#b452cd">3</span>, <span style="color:#b452cd">4</span>, <span style="color:#b452cd">5</span>];
</span></span><span style="display:flex;"><span>ReactDOM.render(
</span></span><span style="display:flex;"><span>  &lt;NumberList numbers={numbers} /&gt;,
</span></span><span style="display:flex;"><span>  <span style="color:#658b00">document</span>.getElementById(<span style="color:#cd5555">&#39;root&#39;</span>)
</span></span><span style="display:flex;"><span>);
</span></span></code></pre></div><blockquote>
<p>React：一个好的经验法则是：在 map( ) 方法中的元素需要设置 key 属性。</p>
</blockquote>
<h3 id="6key-只是在兄弟节点之间必须唯一-1">6.key 只是在兄弟节点之间必须唯一</h3>
<p>数组元素中使用的 <code>key</code> 在其兄弟节点之间应该是独一无二的。然而，它们不需要是全局唯一的。当我们生成两个不同的数组时，我们可以使用相同的 <code>key</code> 值：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#8b008b;font-weight:bold">function</span> Blog(props) {
</span></span><span style="display:flex;"><span>  <span style="color:#8b008b;font-weight:bold">const</span> sidebar = (
</span></span><span style="display:flex;"><span>    &lt;ul&gt;
</span></span><span style="display:flex;"><span>      {props.posts.map((post) =&gt;
</span></span><span style="display:flex;"><span>        &lt;li key={post.id}&gt;
</span></span><span style="display:flex;"><span>          {post.title}
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#a61717;background-color:#e3d2d2">/li&gt;</span>
</span></span><span style="display:flex;"><span>      )}
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#a61717;background-color:#e3d2d2">/ul&gt;</span>
</span></span><span style="display:flex;"><span>  );
</span></span><span style="display:flex;"><span>  <span style="color:#8b008b;font-weight:bold">const</span> content = props.posts.map((post) =&gt;
</span></span><span style="display:flex;"><span>    &lt;div key={post.id}&gt;
</span></span><span style="display:flex;"><span>      &lt;h3&gt;{post.title}&lt;<span style="color:#a61717;background-color:#e3d2d2">/h3&gt;</span>
</span></span><span style="display:flex;"><span>      &lt;p&gt;{post.content}&lt;<span style="color:#a61717;background-color:#e3d2d2">/p&gt;</span>
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#a61717;background-color:#e3d2d2">/div&gt;</span>
</span></span><span style="display:flex;"><span>  );
</span></span><span style="display:flex;"><span>  <span style="color:#8b008b;font-weight:bold">return</span> (
</span></span><span style="display:flex;"><span>    &lt;div&gt;
</span></span><span style="display:flex;"><span>      {sidebar}
</span></span><span style="display:flex;"><span>      &lt;hr /&gt;
</span></span><span style="display:flex;"><span>      {content}
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#a61717;background-color:#e3d2d2">/div&gt;</span>
</span></span><span style="display:flex;"><span>  );
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#8b008b;font-weight:bold">const</span> posts = [
</span></span><span style="display:flex;"><span>  {id: <span style="color:#b452cd">1</span>, title: <span style="color:#cd5555">&#39;Hello World&#39;</span>, content: <span style="color:#cd5555">&#39;Welcome to learning React!&#39;</span>},
</span></span><span style="display:flex;"><span>  {id: <span style="color:#b452cd">2</span>, title: <span style="color:#cd5555">&#39;Installation&#39;</span>, content: <span style="color:#cd5555">&#39;You can install React from npm.&#39;</span>}
</span></span><span style="display:flex;"><span>];
</span></span><span style="display:flex;"><span>ReactDOM.render(
</span></span><span style="display:flex;"><span>  &lt;Blog posts={posts} /&gt;,
</span></span><span style="display:flex;"><span>  <span style="color:#658b00">document</span>.getElementById(<span style="color:#cd5555">&#39;root&#39;</span>)
</span></span><span style="display:flex;"><span>);
</span></span></code></pre></div><h3 id="7vue-中渲染列表-1">7.vue 中渲染列表</h3>
<p>Vue 中渲染列表使用的是特殊指令 <code>v-for</code>，其中也有 <code>key</code> 的相关用法</p>
<p>React 中采用的是 <code>map()</code> 方法遍历数组，然后渲染列表</p>

                    
                    <HR width="100%" id="EOF">
		    <p style="color:#777;">Last modified on 2020-12-16</p>
                    
                </div>
            </div>
            
            
            <nav class="post-pagination">

                
                <a class="newer-posts" href="/posts/2020-12-19-javascript_%E8%BF%9B%E9%98%B6%E9%97%AE%E9%A2%98/">
			Next<br>javascript 进阶问题
                </a>
                
                
                
                <a class="older-posts" href="/posts/2020-12-13-%E5%90%90%E6%A7%BD%E6%8E%A7%E5%88%B6%E5%A5%BD%E8%87%AA%E5%B7%B1%E7%9A%84%E6%83%85%E7%BB%AA/">
			Previous<br>吐槽－－控制好自己的情绪
                </a>
                
            </nav>
            <div class="post-comment-wrapper">
                


<div id="gitalk-container"></div>









            </div>
        </div>
    </div>


                    </div>
            </div><div id="single-column-footer">
Hugo Theme <a href="https://github.com/amazingrise/hugo-theme-diary">Diary</a> by <a href="https://risehere.net/">Rise</a>
<br>
Ported from <a href="https://mak1t0.cc/" target="_blank" rel="noreferrer noopener">Makito</a>'s <a href="https://github.com/SumiMakito/hexo-theme-journal/" target="_blank" rel="noreferrer noopener">Journal.</a> <br>
<br>

&copy;
	
	This is a customized copyright.
	
</div>
            </div>
    
    <script src="/js/journal.js"></script>
    </body>
</html>
